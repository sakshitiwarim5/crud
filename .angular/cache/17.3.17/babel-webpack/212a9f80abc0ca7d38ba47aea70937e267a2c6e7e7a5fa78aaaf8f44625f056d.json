{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { BehaviorSubject } from \"rxjs\";\nimport { Component } from \"@angular/core\";\nimport * as i0 from \"@angular/core\";\nconst STORAGE_KEY = \"companies_v1\";\nexport class CompanyService {\n  constructor() {\n    this.companies = [];\n    this.companies$ = new BehaviorSubject([]);\n    const raw = localStorage.getItem(STORAGE_KEY);\n    this.companies = raw ? JSON.parse(raw) : [];\n    this.companies$.next(this.list());\n  }\n  persist() {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(this.companies));\n    this.companies$.next(this.list());\n  }\n  list() {\n    return [...this.companies].sort((a, b) => b.createdAt.localeCompare(a.createdAt));\n  }\n  list$() {\n    return this.companies$.asObservable();\n  }\n  get(id) {\n    return this.companies.find(c => c.id === id);\n  }\n  create(company) {\n    this.companies.push(company);\n    this.persist();\n  }\n  update(id, company) {\n    const idx = this.companies.findIndex(c => c.id === id);\n    if (idx >= 0) {\n      this.companies[idx] = company; // replace whole object\n      this.persist();\n    }\n  }\n  delete(id) {\n    this.companies = this.companies.filter(c => c.id !== id);\n    this.persist();\n  }\n  static {\n    this.ɵfac = function CompanyService_Factory(t) {\n      return new (t || CompanyService)();\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: CompanyService,\n      factory: CompanyService.ɵfac,\n      providedIn: \"root\"\n    });\n  }\n}\nlet CompanyListComponent = class CompanyListComponent {\n  constructor(svc) {\n    this.svc = svc;\n    this.companies = [];\n  }\n  ngOnInit() {\n    // Subscribe to the BehaviorSubject\n    this.svc.list$().subscribe(list => {\n      this.companies = list;\n    });\n  }\n  deleteCompany(c) {\n    const ok = confirm(`Delete \"${c.companyName}\"?`);\n    if (ok) {\n      this.svc.delete(c.id);\n    }\n  }\n};\nCompanyListComponent = __decorate([Component({\n  selector: \"app-company-list\",\n  templateUrl: \"./company-list.component.html\",\n  styleUrls: [\"./company-list.component.css\"]\n})], CompanyListComponent);\nexport { CompanyListComponent };","map":{"version":3,"names":["BehaviorSubject","Component","STORAGE_KEY","CompanyService","constructor","companies","companies$","raw","localStorage","getItem","JSON","parse","next","list","persist","setItem","stringify","sort","a","b","createdAt","localeCompare","list$","asObservable","get","id","find","c","create","company","push","update","idx","findIndex","delete","filter","factory","ɵfac","providedIn","CompanyListComponent","svc","ngOnInit","subscribe","deleteCompany","ok","confirm","companyName","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\asus\\OneDrive\\Desktop\\easy\\src\\app\\company.service.ts"],"sourcesContent":["// import { Injectable } from \"@angular/core\";\r\n// import { Company } from \"./models\";\r\n\r\n// const STORAGE_KEY = \"companies_v1\";\r\n\r\n// @Injectable({ providedIn: \"root\" })\r\n// export class CompanyService {\r\n//   private companies: Company[] = [];\r\n\r\n//   constructor() {\r\n//     const raw = localStorage.getItem(STORAGE_KEY);\r\n//     this.companies = raw ? JSON.parse(raw) : [];\r\n//   }\r\n\r\n//   private persist() {\r\n//     localStorage.setItem(STORAGE_KEY, JSON.stringify(this.companies));\r\n//   }\r\n\r\n//   list(): Company[] {\r\n//     return [...this.companies].sort((a, b) =>\r\n//       b.createdAt.localeCompare(a.createdAt)\r\n//     );\r\n//   }\r\n\r\n//   get(id: string): Company | undefined {\r\n//     return this.companies.find((c) => c.id === id);\r\n//   }\r\n\r\n//   create(company: Company) {\r\n//     this.companies.push(company);\r\n//     this.persist();\r\n//   }\r\n\r\n//   update(id: string, company: Company) {\r\n//     const idx = this.companies.findIndex((c) => c.id === id);\r\n//     if (idx >= 0) {\r\n//       this.companies[idx] = company;\r\n//       this.persist();\r\n//     }\r\n//   }\r\n\r\n//   delete(id: string) {\r\n//     this.companies = this.companies.filter((c) => c.id !== id);\r\n//     this.persist();\r\n//   }\r\n// }\r\nimport { Injectable } from \"@angular/core\";\r\nimport { BehaviorSubject } from \"rxjs\";\r\nimport { Company } from \"./models\";\r\n\r\nconst STORAGE_KEY = \"companies_v1\";\r\n\r\n@Injectable({ providedIn: \"root\" })\r\nexport class CompanyService {\r\n  private companies: Company[] = [];\r\n  private companies$ = new BehaviorSubject<Company[]>([]);\r\n\r\n  constructor() {\r\n    const raw = localStorage.getItem(STORAGE_KEY);\r\n    this.companies = raw ? JSON.parse(raw) : [];\r\n    this.companies$.next(this.list());\r\n  }\r\n\r\n  private persist() {\r\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(this.companies));\r\n    this.companies$.next(this.list());\r\n  }\r\n\r\n  list(): Company[] {\r\n    return [...this.companies].sort((a, b) =>\r\n      b.createdAt.localeCompare(a.createdAt)\r\n    );\r\n  }\r\n\r\n  list$() {\r\n    return this.companies$.asObservable();\r\n  }\r\n\r\n  get(id: string): Company | undefined {\r\n    return this.companies.find((c) => c.id === id);\r\n  }\r\n\r\n  create(company: Company) {\r\n    this.companies.push(company);\r\n    this.persist();\r\n  }\r\n\r\n  update(id: string, company: Company) {\r\n    const idx = this.companies.findIndex((c) => c.id === id);\r\n    if (idx >= 0) {\r\n      this.companies[idx] = company; // replace whole object\r\n      this.persist();\r\n    }\r\n  }\r\n\r\n  delete(id: string) {\r\n    this.companies = this.companies.filter((c) => c.id !== id);\r\n    this.persist();\r\n  }\r\n}\r\nimport { Component, OnInit } from \"@angular/core\";\r\nimport { CompanyService } from \"../company.service\";\r\nimport { Company } from \"../models\";\r\n\r\n@Component({\r\n  selector: \"app-company-list\",\r\n  templateUrl: \"./company-list.component.html\",\r\n  styleUrls: [\"./company-list.component.css\"],\r\n})\r\nexport class CompanyListComponent implements OnInit {\r\n  companies: Company[] = [];\r\n\r\n  constructor(private svc: CompanyService) {}\r\n\r\n  ngOnInit(): void {\r\n    // Subscribe to the BehaviorSubject\r\n    this.svc.list$().subscribe((list) => {\r\n      this.companies = list;\r\n    });\r\n  }\r\n\r\n  deleteCompany(c: Company) {\r\n    const ok = confirm(`Delete \"${c.companyName}\"?`);\r\n    if (ok) {\r\n      this.svc.delete(c.id);\r\n    }\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}